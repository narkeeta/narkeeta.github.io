<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script>
	function swapTag(element, newTag) {
		var newElement = "<" + newTag + ">" + element.html() + "</" + newTag + ">";
		element.replaceWith(newElement);
	}

	function elementScrolled(elem) {
		var docViewTop = $(window).scrollTop();
		var docViewBottom = docViewTop + $(window).height();
		var elemTop = elem.offset().top;
		return ((elemTop <= docViewBottom) && (elemTop >= docViewTop));
	}

	function animatePageItems() {
		if ($('.homepage').length) {
			var sec2image = $("#welcome-to-evolution img");
			var sec2title = $("#welcome-to-evolution .image-position-right .image-card");
			var sec2text = $("#welcome-to-evolution .sqs-block-html");
			var sec2but = $("#welcome-to-evolution .sqs-block-button .sqs-block-button-element--medium");
			if (elementScrolled(sec2image)) {
				sec2image.delay(300).addClass("fadeInTopLeft");
				sec2title.delay(400).addClass("fadeInLeft");
				sec2text.delay(500).addClass("fadeInLeft");
				sec2but.delay(600).addClass("fadeInLeft");
			}
			var sec4text = $(".homepage #get-to-know-us .image-title");
			var sec4but = $("#get-to-know-us .sqs-block-button .sqs-block-button-element--medium");
			var sec4img = $("#get-to-know-us img");
			if (elementScrolled(sec4img)) {
				sec4img.delay(300).addClass("fadeInUp");
				sec4text.delay(400).addClass("fadeInRight");
				sec4but.delay(500).addClass("fadeInRight");
			}
			var introTitle = $("#evolution-home .sqs-layout");
			if (elementScrolled(introTitle)) {
				introTitle.delay(300).addClass("fadeInDown");
			}
			var sec3text = $(".homepage #how-we-help .sqs-block-content");
			if (elementScrolled(sec3text)) {
				sec3text.delay(600).addClass("fadeInDown");
			}
			$("#our-journal .summary-item").each(function() {
				if (elementScrolled($(this))) $(this).delay(300).addClass("fadeInUp");
			});

			var sec5main = $("#our-journal .sqs-block-content h1");
			if (elementScrolled(sec5main)) {
				sec5main.delay(300).addClass("fadeInUp");
			}
			var qTitle = $(".custom-gallery-text h1");
			var qQuote = $(".custom-gallery-text p");
			if (elementScrolled(qTitle)) {
				qTitle.delay(400).addClass("fadeInLeft");
				qQuote.delay(500).addClass("fadeInRight");
			}
		} else if ($('#collection-5abbf8f71ae6cf781468a412').length) { //Services
			$('#collection-5abbf8f71ae6cf781468a412 .image-position-right .intrinsic').each(function() {
				if (elementScrolled($(this))) $(this).delay(300).addClass("fadeInUp");
			});
			$('#collection-5abbf8f71ae6cf781468a412 .image-position-right .image-card-wrapper').each(function() {
				if (elementScrolled($(this))) $(this).delay(400).addClass("fadeInLeft");
			});
			$('#collection-5abbf8f71ae6cf781468a412 .special_text_right').each(function() {
				if (elementScrolled($(this))) $(this).delay(500).addClass("fadeInLeft");
			});
			$('#collection-5abbf8f71ae6cf781468a412 .image-position-left .intrinsic').each(function() {
				if (elementScrolled($(this))) $(this).delay(300).addClass("fadeInUp");
			});
			$('#collection-5abbf8f71ae6cf781468a412 .image-position-left .image-card-wrapper').each(function() {
				if (elementScrolled($(this))) $(this).delay(400).addClass("fadeInRight");
			});
			$('#collection-5abbf8f71ae6cf781468a412 .special_text_left').each(function() {
				if (elementScrolled($(this))) $(this).delay(500).addClass("fadeInRight");
			});
			var serviceTitle = $("#collection-5abbf8f71ae6cf781468a412 #banner .text-align-center");
			if (elementScrolled(serviceTitle)) serviceTitle.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5aa1de55652dea8074ec8942').length) { //Honestly not sure
			var titleEl = $(".collection-5aa1de55652dea8074ec8942 .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5aa73b88f9619a4570245e76').length) { //Contact
			var titleEl = $("#collection-5aa73b88f9619a4570245e76 .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5ac1bd33758d46335c32db34').length) { //Team
			var titleEl = $(".collection-5ac1bd33758d46335c32db34 .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5aa9619cec212db2f3a5bcc8').length) { //Journal
			var titleEl = $("#collection-5aa9619cec212db2f3a5bcc8 .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5ad296468a922d44a4549808').length) { //Our Partners
			var titleEl = $("#collection-5ad296468a922d44a4549808 .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5ad4bd451ae6cffccca0681a').length) { //Essence of evolution
			var titleEl = $("#collection-5ad4bd451ae6cffccca0681a .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5ad28cec575d1f10b3ce6dfb').length) { //About
			var titleEl = $("#collection-5ad28cec575d1f10b3ce6dfb #banner-1 .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		} else if ($('#collection-5ada8a656d2a73aec6104c93').length) {
			var titleEl = $("#collection-5ada8a656d2a73aec6104c93 .Intro .text-align-center");
			if (elementScrolled(titleEl)) titleEl.delay(300).addClass("fadeInDown");
		}
	}

	$(document).ready(function() {
		////////////////////
		//Document Setup
		////////////////////
		if ($(".Parallax-host-outer").length) {
			$(".Parallax-host-outer").remove();
		}
		var arrow = '<div class="long-arrow-right"><svg viewBox="0 0 36.44 25"><polyline points="23.69 1.15 35.04 12.5 23.69 23.85"></polyline><line x1="35.04" y1="12.5" x2="0.96" y2="12.5"></line></svg></div>'
		$('.newsletter-form-footnote p').replaceWith(arrow);
		if ($(".summary-read-more-link").length) {
			$(".summary-read-more-link").html("read more");
		}
		animatePageItems();
		///////////////////////
		//Homepage Gallery Code
		///////////////////////
		if ($(".homepage").length) {
			$("#new-gallery .Index-gallery-item").css('position', 'relative');
			swapTag($("#welcome-to-evolution").find(".image-title p"), "h1");
			$("#get-to-know-us").find(".image-title p").each(function() {
				swapTag($(this), "h1");
			});
			$(".Index-gallery-item:first-child").addClass('active-gallery-item');
			$(".Index-gallery-indicators-item:first-child").addClass('active-gallery-button');
			setInterval(function() {
				if ($(".active-gallery-item").is(".Index-gallery-item:last-child")) {
					$(".active-gallery-item").removeClass("active-gallery-item");
					$(".active-gallery-button").removeClass("active-gallery-button");
					$(".Index-gallery-item:first-child").addClass('active-gallery-item');
					$(".Index-gallery-indicators-item:first-child").addClass('active-gallery-button');
				} else {
					$(".active-gallery-item").next().addClass("next-active-gallery-item");
					$(".active-gallery-button").next().addClass("next-active-gallery-button");
					$(".active-gallery-item").removeClass("active-gallery-item");
					$(".active-gallery-button").removeClass("active-gallery-button");
					$(".next-active-gallery-item").addClass("active-gallery-item");
					$(".next-active-gallery-button").addClass("active-gallery-button");
					$(".active-gallery-item").removeClass("next-active-gallery-item");
					$(".active-gallery-button").removeClass("next-active-gallery-button");
				}
				var activeIndex = $(".active-gallery-item").index();
				$("#new-gallery .Index-gallery-inner").css('transform', 'translateX(-' + activeIndex + '00vw)');
			}, 8000);
			$(".Index-gallery-indicators-item").click(function() {
				var buttonIn = $(this).index();
				buttonIn++;
				$(".active-gallery-item").removeClass("active-gallery-item");
				$(".active-gallery-button").removeClass("active-gallery-button");
				$(".Index-gallery-item:nth-child(" + buttonIn + ")").addClass('active-gallery-item');
				$(".Index-gallery-indicators-item:nth-child(" + buttonIn + ")").addClass('active-gallery-button');
				var activeIndex = $(".active-gallery-item").index();
				$("#new-gallery .Index-gallery-inner").css('transform', 'translateX(-' + activeIndex + '00vw)');
			});
		}

		/////////////////////////////
		//Formating for services page
		/////////////////////////////
		if ($('#collection-5abbf8f71ae6cf781468a412').length) {
			$("#collection-5abbf8f71ae6cf781468a412 .image-position-right").each(function() {
				var mainPage = $(this).parents('.Index-page-content');
				mainPage.find('.html-block').children('.sqs-block-content').addClass('special_text_right');
			});
			$("#collection-5abbf8f71ae6cf781468a412 .image-position-left").each(function() {
				var mainPage = $(this).parents('.Index-page-content');
				mainPage.find('.html-block').children('.sqs-block-content').addClass('special_text_left');
			});
		}
		//////////////////////
		//Footer Functions
		//////////////////////
		$(".Footer .newsletter-form-fields-wrapper .form-item.email input").focus(function() {
			$("Footer .newsletter-form-wrapper").addClass("is-focused");
		});
		$(".Footer .newsletter-form-fields-wrapper .form-item.email input").focusout(function() {
			if ($.trim($(".Footer .newsletter-form-fields-wrapper .form-item.email input").val()).length == 0) {
				$("Footer .newsletter-form-wrapper").removeClass("is-focused");
			}
		});
		$(".long-arrow-right").click(function() {
			$(this).parents(".newsletter-form").submit();
		});
		$(".Index-page-scroll-indicator").click(function() {
				if ($('.Main').length) {
					$('html, body').animate({
        	scrollTop: $('.Main').offset().top
    		}, 'slow');
			}
		});
	});
	$(window).scroll(function() {
		animatePageItems();
		if ($(window).scrollTop() === 0) {
			if ($('.Intro').length) $('.Intro .Index-page-scroll-indicator').removeClass('hidden');
		} else {
			if ($('.Intro').length) $('.Intro .Index-page-scroll-indicator').addClass('hidden');
		}
	});
	$(window).load(function() {
		animatePageItems();
		if ($(window).scrollTop() === 0) {
			if ($('.Intro').length) $('.Intro .Index-page-scroll-indicator').removeClass('hidden');
		} else {
			if ($('.Intro').length) $('.Intro .Index-page-scroll-indicator').addClass('hidden');
		}
	});
	$(window).resize(function() {
		animatePageItems();
		var images = document.querySelectorAll('img[data-src]');
		for (var i = 0; i < images.length; i++) {
			console.log("loading: " + i);
			ImageLoader.load(images[i], {
				load: true
			});
		}
	});

</script>
